{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- ... head content remains the same ... -->
  </head>
  <body>
    <!-- ... header remains the same ... -->

    <main class="main-content py-5">
      <div class="container">
        <section class="filter-section mb-4">
          <h2 class="section-title">Filter by</h2>
          <form method="GET" action="{% url 'books' %}" class="row g-3">
            <div class="col-md-6">
              <select name="genre" class="form-select">
                <option value="">Genre</option>
                {% for genre_option in genres %}
                <option value="{{ genre_option }}" {% if request.GET.genre == genre_option %}selected{% endif %}>{{ genre_option }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="col-md-6">
              <select name="author" class="form-select">
                <option value="">Author</option>
                {% for author_option in authors %}
                <option value="{{ author_option }}" {% if request.GET.author == author_option %}selected{% endif %}>{{ author_option }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="col-12">
              <button type="submit" class="btn btn-primary">Apply Filters</button>
            </div>
          </form>
        </section>

        <section class="book-section">
          <h2 class="section-title mb-4">Available Books</h2>
          <div class="row row-cols-1 row-cols-md-3 g-4">
            {% for x in mybooks %}
            <div class="col">
              <div class="card h-100">
                {% if x.image %}
                <img
                  src="{{ x.image.url }}"
                  alt="{{ x.title }}"
                  class="card-img-top img-fluid"
                />
                {% else %}
                <div class="card-img-top bg-light" style="height: 200px"></div>
                {% endif %}
                <div class="card-body">
                  <h5 class="card-title">{{ x.title }}</h5>
                  <h6 class="card-subtitle mb-2 text-muted">{{ x.author }}</h6>
                  <p class="card-text">Price: Ksh{{ x.price }}</p>
                  {% if x.stock > 0 %}
                  <p class="text-success">In Stock</p>
                  {% else %}
                  <p class="text-danger">Out of Stock</p>
                  {% endif %}
                </div>
                <div class="card-footer">
                  <a href="{% url 'book_detail' x.id %}" class="btn btn-info">View Details</a>
                  {% if x.stock > 0 %}
                  <a href="{% url 'add_to_cart' x.id %}" class="btn btn-primary">Add to Cart</a>
                  {% else %}
                  <button class="btn btn-secondary" disabled>Out of Stock</button>
                  {% endif %}
                </div>
              </div>
            </div>
            {% empty %}
            <p class="text-center">No books available at the moment.</p>
            {% endfor %}
          </div>
        </section>
      </div>
    </main>

    <!-- ... footer remains the same ... -->
  </body>
</html>
